var Tt=Object.defineProperty;var y=(h,e)=>Tt(h,"name",{value:e,configurable:!0});var yt="registered as custom element";function gt(h,e){console.warn(`missing implementation for ${e}(...data) in ${h.__proto__.constructor.name}`)}y(gt,"NotImplemented");function wt(h){return h.prototype.constructor.name.replace(/([A-Z])([a-z])/g,(e,i,r,s)=>{let a=`${i.toLowerCase()}${r}`;return s>0?`-${a}`:a})}y(wt,"getElementTagName");var Y=class extends HTMLElement{static{y(this,"CustomElement")}static register(e){if(!e[yt]){let i=e.tagName||wt(e);return customElements.define(i,e),e[yt]=!0,customElements.whenDefined(i)}return Promise.resolve()}static get tagName(){return wt(this)}constructor(e={}){super(),customElements.resolveScope||(customElements.resolveScope=function(s){try{return s.getRootNode().host}catch(a){console.warn(a)}return window}),this._options=e;let i={childList:s=>{this.handleChildChanges(Array.from(s.addedNodes),Array.from(s.removedNodes)),this.render()},attributes:s=>{this.handleAttributeChange(s.attributeName,s.oldValue,this.getAttribute(s.attributeName)),this.render()}};this._observer=new MutationObserver(s=>{this.isConnected&&s.forEach(a=>{i[a.type](a)})}),this._observer.observe(this,{childList:!0,attributes:!0});let r={mode:"open"};this._shadow=this.attachShadow(r),this._style=document.createElement("style"),this._style.textContent=this.getStyle(),this._options.header!==!1&&(this._header=document.createElement("header")),this._options.slot!==!1&&this._options.void!==!0&&(this._slot=document.createElement("slot")),this._options.footer!==!1&&(this._footer=document.createElement("footer"))}connectedCallback(){this.render()}handleChildChanges(e,i){this._options.void||gt(this,"handleChildChanges")}handleAttributeChange(e,i,r){gt(this,"handleAttributeChange")}getStyle(){return""}render(){this._shadow.innerHTML="",this._shadow.append(this._style),this._options.header!==!1&&this._shadow.append(this._header),this._options.slot!==!1&&this._shadow.append(this._slot),this._options.footer!==!1&&this._shadow.append(this._footer)}};function ut(h){h=h.replace(/\\\*[\w\s\r\n]+?\*\\/,""),h=h.replace(/\r?\n(\r?\n)+/,`
`);let e=/\b[\w\W][^\s]*?\([^)]*\)[\r\n\s]*{/,i=[];for(let r=h.match(e);r;r=h.match(e)){r=r[0];let s=h.indexOf(r),a=s+r.length,l=0;Array.from(h).slice(s+r.length).some((c,f)=>{if(c==="{")return l++,!1;if(c==="}")return l>0?(l--,!1):(a+=f+1,!0)});let u=h.slice(s,a);i.push(u),h=h.replace(u,"")}return{quasiGlobal:h,classCode:i.join(`
`)}}y(ut,"splitCodeSections");function j(h){return h&&(h.__listeners={},h.listen=function(e,i){e.map||(e=[e]),e.forEach(r=>{h.addEventListener(r,i),h.__listeners[r]||(h.__listeners[r]=[]),h.__listeners[r].push(i)})}.bind(h),h.ignore=function(e,i){e.map||(e=[e]),e.forEach(r=>{if(!i)return h.__listeners[r].forEach(s=>h.removeEventListener(r,s));h.removeEventListener(r,i)})}.bind(h),h)}y(j,"enrich");var M=class h{static{y(this,"Vector")}constructor(e,i,r){arguments.length===1&&(r=e.z,i=e.y,e=e.x),this.x=e,this.y=i,r!==void 0&&(this.z=r)}dist(e,i,r=0){i!==void 0&&(e={x:e,y:i,z:r});let s=0;s+=(this.x-e.x)**2,s+=(this.y-e.y)**2;let a=this.z?this.z:0,l=e.z?e.z:0;return s+=(a-l)**2,s**.5}normalize(e){let i=this.dist(0,0,0);return new h(e*this.x/i,e*this.y/i,e*this.z/i)}getAngle(){return-Math.atan2(this.y,this.x)}reflect(e){let i=new h(e.x-this.x,e.y-this.y);return e.z!==void 0&&(i.z=e.z,this.z!==void 0&&(i.z-=this.z)),this.subtract(i)}add(e){let i=new h(this.x+e.x,this.y+e.y);return this.z!==void 0&&(i.z=this.z,e.z!==void 0&&(i.z+=e.z)),i}subtract(e){let i=new h(this.x-e.x,this.y-e.y);return this.z!==void 0&&(i.z=this.z,e.z!==void 0&&(i.z-=e.z)),i}scale(e=1){if(e===0)return new h(0,0,this.z===void 0?void 0:0);let i=new h(this.x*e,this.y*e);return this.z!==void 0&&(i.z=this.z*e),i}};var{abs:Z,cos:N,sin:H,acos:kt,atan2:J,sqrt:D,pow:P}=Math;function Q(h){return h<0?-P(-h,1/3):P(h,1/3)}y(Q,"crt");var bt=Math.PI,st=2*bt,q=bt/2,Mt=1e-6,ft=Number.MAX_SAFE_INTEGER||9007199254740991,dt=Number.MIN_SAFE_INTEGER||-9007199254740991,$t={x:0,y:0,z:0},x={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(h,e){let i=e(h),r=i.x*i.x+i.y*i.y;return typeof i.z<"u"&&(r+=i.z*i.z),D(r)},compute:function(h,e,i){if(h===0)return e[0].t=0,e[0];let r=e.length-1;if(h===1)return e[r].t=1,e[r];let s=1-h,a=e;if(r===0)return e[0].t=h,e[0];if(r===1){let o={x:s*a[0].x+h*a[1].x,y:s*a[0].y+h*a[1].y,t:h};return i&&(o.z=s*a[0].z+h*a[1].z),o}if(r<4){let o=s*s,u=h*h,c,f,d,p=0;r===2?(a=[a[0],a[1],a[2],$t],c=o,f=s*h*2,d=u):r===3&&(c=o*s,f=o*h*3,d=s*u*3,p=h*u);let m={x:c*a[0].x+f*a[1].x+d*a[2].x+p*a[3].x,y:c*a[0].y+f*a[1].y+d*a[2].y+p*a[3].y,t:h};return i&&(m.z=c*a[0].z+f*a[1].z+d*a[2].z+p*a[3].z),m}let l=JSON.parse(JSON.stringify(e));for(;l.length>1;){for(let o=0;o<l.length-1;o++)l[o]={x:l[o].x+(l[o+1].x-l[o].x)*h,y:l[o].y+(l[o+1].y-l[o].y)*h},typeof l[o].z<"u"&&(l[o]=l[o].z+(l[o+1].z-l[o].z)*h);l.splice(l.length-1,1)}return l[0].t=h,l[0]},computeWithRatios:function(h,e,i,r){let s=1-h,a=i,l=e,o=a[0],u=a[1],c=a[2],f=a[3],d;if(o*=s,u*=h,l.length===2)return d=o+u,{x:(o*l[0].x+u*l[1].x)/d,y:(o*l[0].y+u*l[1].y)/d,z:r?(o*l[0].z+u*l[1].z)/d:!1,t:h};if(o*=s,u*=2*s,c*=h*h,l.length===3)return d=o+u+c,{x:(o*l[0].x+u*l[1].x+c*l[2].x)/d,y:(o*l[0].y+u*l[1].y+c*l[2].y)/d,z:r?(o*l[0].z+u*l[1].z+c*l[2].z)/d:!1,t:h};if(o*=s,u*=1.5*s,c*=3*s,f*=h*h*h,l.length===4)return d=o+u+c+f,{x:(o*l[0].x+u*l[1].x+c*l[2].x+f*l[3].x)/d,y:(o*l[0].y+u*l[1].y+c*l[2].y+f*l[3].y)/d,z:r?(o*l[0].z+u*l[1].z+c*l[2].z+f*l[3].z)/d:!1,t:h}},derive:function(h,e){let i=[];for(let r=h,s=r.length,a=s-1;s>1;s--,a--){let l=[];for(let o=0,u;o<a;o++)u={x:a*(r[o+1].x-r[o].x),y:a*(r[o+1].y-r[o].y)},e&&(u.z=a*(r[o+1].z-r[o].z)),l.push(u);i.push(l),r=l}return i},between:function(h,e,i){return e<=h&&h<=i||x.approximately(h,e)||x.approximately(h,i)},approximately:function(h,e,i){return Z(h-e)<=(i||Mt)},length:function(h){let i=x.Tvalues.length,r=0;for(let s=0,a;s<i;s++)a=.5*x.Tvalues[s]+.5,r+=x.Cvalues[s]*x.arcfn(a,h);return .5*r},map:function(h,e,i,r,s){let a=i-e,l=s-r,o=h-e,u=o/a;return r+l*u},lerp:function(h,e,i){let r={x:e.x+h*(i.x-e.x),y:e.y+h*(i.y-e.y)};return e.z&&i.z&&(r.z=e.z+h*(i.z-e.z)),r},pointToString:function(h){let e=h.x+"/"+h.y;return typeof h.z<"u"&&(e+="/"+h.z),e},pointsToString:function(h){return"["+h.map(x.pointToString).join(", ")+"]"},copy:function(h){return JSON.parse(JSON.stringify(h))},angle:function(h,e,i){let r=e.x-h.x,s=e.y-h.y,a=i.x-h.x,l=i.y-h.y,o=r*l-s*a,u=r*a+s*l;return J(o,u)},round:function(h,e){let i=""+h,r=i.indexOf(".");return parseFloat(i.substring(0,r+1+e))},dist:function(h,e){let i=h.x-e.x,r=h.y-e.y;return D(i*i+r*r)},closest:function(h,e){let i=P(2,63),r,s;return h.forEach(function(a,l){s=x.dist(e,a),s<i&&(i=s,r=l)}),{mdist:i,mpos:r}},abcratio:function(h,e){if(e!==2&&e!==3)return!1;if(typeof h>"u")h=.5;else if(h===0||h===1)return h;let i=P(h,e)+P(1-h,e),r=i-1;return Z(r/i)},projectionratio:function(h,e){if(e!==2&&e!==3)return!1;if(typeof h>"u")h=.5;else if(h===0||h===1)return h;let i=P(1-h,e),r=P(h,e)+i;return i/r},lli8:function(h,e,i,r,s,a,l,o){let u=(h*r-e*i)*(s-l)-(h-i)*(s*o-a*l),c=(h*r-e*i)*(a-o)-(e-r)*(s*o-a*l),f=(h-i)*(a-o)-(e-r)*(s-l);return f==0?!1:{x:u/f,y:c/f}},lli4:function(h,e,i,r){let s=h.x,a=h.y,l=e.x,o=e.y,u=i.x,c=i.y,f=r.x,d=r.y;return x.lli8(s,a,l,o,u,c,f,d)},lli:function(h,e){return x.lli4(h,h.c,e,e.c)},makeline:function(h,e){let i=h.x,r=h.y,s=e.x,a=e.y,l=(s-i)/3,o=(a-r)/3;return new et(i,r,i+l,r+o,i+2*l,r+2*o,s,a)},findbbox:function(h){let e=ft,i=ft,r=dt,s=dt;return h.forEach(function(a){let l=a.bbox();e>l.x.min&&(e=l.x.min),i>l.y.min&&(i=l.y.min),r<l.x.max&&(r=l.x.max),s<l.y.max&&(s=l.y.max)}),{x:{min:e,mid:(e+r)/2,max:r,size:r-e},y:{min:i,mid:(i+s)/2,max:s,size:s-i}}},shapeintersections:function(h,e,i,r,s){if(!x.bboxoverlap(e,r))return[];let a=[],l=[h.startcap,h.forward,h.back,h.endcap],o=[i.startcap,i.forward,i.back,i.endcap];return l.forEach(function(u){u.virtual||o.forEach(function(c){if(c.virtual)return;let f=u.intersects(c,s);f.length>0&&(f.c1=u,f.c2=c,f.s1=h,f.s2=i,a.push(f))})}),a},makeshape:function(h,e,i){let r=e.points.length,s=h.points.length,a=x.makeline(e.points[r-1],h.points[0]),l=x.makeline(h.points[s-1],e.points[0]),o={startcap:a,forward:h,back:e,endcap:l,bbox:x.findbbox([a,h,e,l])};return o.intersections=function(u){return x.shapeintersections(o,o.bbox,u,u.bbox,i)},o},getminmax:function(h,e,i){if(!i)return{min:0,max:0};let r=ft,s=dt,a,l;i.indexOf(0)===-1&&(i=[0].concat(i)),i.indexOf(1)===-1&&i.push(1);for(let o=0,u=i.length;o<u;o++)a=i[o],l=h.get(a),l[e]<r&&(r=l[e]),l[e]>s&&(s=l[e]);return{min:r,mid:(r+s)/2,max:s,size:s-r}},align:function(h,e){let i=e.p1.x,r=e.p1.y,s=-J(e.p2.y-r,e.p2.x-i),a=y(function(l){return{x:(l.x-i)*N(s)-(l.y-r)*H(s),y:(l.x-i)*H(s)+(l.y-r)*N(s)}},"d");return h.map(a)},roots:function(h,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};let i=h.length-1,r=x.align(h,e),s=y(function(w){return 0<=w&&w<=1},"reduce");if(i===2){let w=r[0].y,_=r[1].y,O=r[2].y,R=w-2*_+O;if(R!==0){let G=-D(_*_-w*O),U=-w+_,B=-(G+U)/R,V=-(-G+U)/R;return[B,V].filter(s)}else if(_!==O&&R===0)return[(2*_-O)/(2*_-2*O)].filter(s);return[]}let a=r[0].y,l=r[1].y,o=r[2].y,u=r[3].y,c=-a+3*l-3*o+u,f=3*a-6*l+3*o,d=-3*a+3*l,p=a;if(x.approximately(c,0)){if(x.approximately(f,0))return x.approximately(d,0)?[]:[-p/d].filter(s);let w=D(d*d-4*f*p),_=2*f;return[(w-d)/_,(-d-w)/_].filter(s)}f/=c,d/=c,p/=c;let m=(3*d-f*f)/3,g=m/3,v=(2*f*f*f-9*f*d+27*p)/27,b=v/2,E=b*b+g*g*g,S,C,k,z,T;if(E<0){let w=-m/3,_=w*w*w,O=D(_),R=-v/(2*O),G=R<-1?-1:R>1?1:R,U=kt(G),B=Q(O),V=2*B;return k=V*N(U/3)-f/3,z=V*N((U+st)/3)-f/3,T=V*N((U+2*st)/3)-f/3,[k,z,T].filter(s)}else{if(E===0)return S=b<0?Q(-b):-Q(b),k=2*S-f/3,z=-S-f/3,[k,z].filter(s);{let w=D(E);return S=Q(-b+w),C=Q(b+w),[S-C-f/3].filter(s)}}},droots:function(h){if(h.length===3){let e=h[0],i=h[1],r=h[2],s=e-2*i+r;if(s!==0){let a=-D(i*i-e*r),l=-e+i,o=-(a+l)/s,u=-(-a+l)/s;return[o,u]}else if(i!==r&&s===0)return[(2*i-r)/(2*(i-r))];return[]}if(h.length===2){let e=h[0],i=h[1];return e!==i?[e/(e-i)]:[]}return[]},curvature:function(h,e,i,r,s){let a,l,o,u,c=0,f=0,d=x.compute(h,e),p=x.compute(h,i),m=d.x*d.x+d.y*d.y;if(r?(a=D(P(d.y*p.z-p.y*d.z,2)+P(d.z*p.x-p.z*d.x,2)+P(d.x*p.y-p.x*d.y,2)),l=P(m+d.z*d.z,3/2)):(a=d.x*p.y-d.y*p.x,l=P(m,3/2)),a===0||l===0)return{k:0,r:0};if(c=a/l,f=l/a,!s){let g=x.curvature(h-.001,e,i,r,!0).k,v=x.curvature(h+.001,e,i,r,!0).k;u=(v-c+(c-g))/2,o=(Z(v-c)+Z(c-g))/2}return{k:c,r:f,dk:u,adk:o}},inflections:function(h){if(h.length<4)return[];let e=x.align(h,{p1:h[0],p2:h.slice(-1)[0]}),i=e[2].x*e[1].y,r=e[3].x*e[1].y,s=e[1].x*e[2].y,a=e[3].x*e[2].y,l=18*(-3*i+2*r+3*s-a),o=18*(3*i-r-3*s),u=18*(s-i);if(x.approximately(l,0)){if(!x.approximately(o,0)){let p=-u/o;if(0<=p&&p<=1)return[p]}return[]}let c=o*o-4*l*u,f=Math.sqrt(c),d=2*l;return x.approximately(d,0)?[]:[(f-o)/d,-(o+f)/d].filter(function(p){return 0<=p&&p<=1})},bboxoverlap:function(h,e){let i=["x","y"],r=i.length;for(let s=0,a,l,o,u;s<r;s++)if(a=i[s],l=h[a].mid,o=e[a].mid,u=(h[a].size+e[a].size)/2,Z(l-o)>=u)return!1;return!0},expandbox:function(h,e){e.x.min<h.x.min&&(h.x.min=e.x.min),e.y.min<h.y.min&&(h.y.min=e.y.min),e.z&&e.z.min<h.z.min&&(h.z.min=e.z.min),e.x.max>h.x.max&&(h.x.max=e.x.max),e.y.max>h.y.max&&(h.y.max=e.y.max),e.z&&e.z.max>h.z.max&&(h.z.max=e.z.max),h.x.mid=(h.x.min+h.x.max)/2,h.y.mid=(h.y.min+h.y.max)/2,h.z&&(h.z.mid=(h.z.min+h.z.max)/2),h.x.size=h.x.max-h.x.min,h.y.size=h.y.max-h.y.min,h.z&&(h.z.size=h.z.max-h.z.min)},pairiteration:function(h,e,i){let r=h.bbox(),s=e.bbox(),a=1e5,l=i||.5;if(r.x.size+r.y.size<l&&s.x.size+s.y.size<l)return[(a*(h._t1+h._t2)/2|0)/a+"/"+(a*(e._t1+e._t2)/2|0)/a];let o=h.split(.5),u=e.split(.5),c=[{left:o.left,right:u.left},{left:o.left,right:u.right},{left:o.right,right:u.right},{left:o.right,right:u.left}];c=c.filter(function(d){return x.bboxoverlap(d.left.bbox(),d.right.bbox())});let f=[];return c.length===0||(c.forEach(function(d){f=f.concat(x.pairiteration(d.left,d.right,l))}),f=f.filter(function(d,p){return f.indexOf(d)===p})),f},getccenter:function(h,e,i){let r=e.x-h.x,s=e.y-h.y,a=i.x-e.x,l=i.y-e.y,o=r*N(q)-s*H(q),u=r*H(q)+s*N(q),c=a*N(q)-l*H(q),f=a*H(q)+l*N(q),d=(h.x+e.x)/2,p=(h.y+e.y)/2,m=(e.x+i.x)/2,g=(e.y+i.y)/2,v=d+o,b=p+u,E=m+c,S=g+f,C=x.lli8(d,p,v,b,m,g,E,S),k=x.dist(C,h),z=J(h.y-C.y,h.x-C.x),T=J(e.y-C.y,e.x-C.x),w=J(i.y-C.y,i.x-C.x),_;return z<w?((z>T||T>w)&&(z+=st),z>w&&(_=w,w=z,z=_)):w<T&&T<z?(_=w,w=z,z=_):w+=st,C.s=z,C.e=w,C.r=k,C},numberSort:function(h,e){return h-e}},ot=class h{static{y(this,"PolyBezier")}constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return x.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,i){return e+i})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var i=e[0].bbox(),r=1;r<e.length;r++)x.expandbox(i,e[r].bbox());return i}offset(e){let i=[];return this.curves.forEach(function(r){i.push(...r.offset(e))}),new h(i)}};function Pt(h){h=h.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ");let e=h.replace(/([a-zA-Z])\s?/g,"|$1").split("|"),i=e.length,r,s,a,l,o=[],u,c,f=0,d=0,p=0,m=0,g=0,v=0,b=0,E=0,S=0,C=0,k=0,z=0,T=0,w="";for(r=1;r<i;r++)if(s=e[r],a=s.substring(0,1),l=a.toLowerCase(),o=s.replace(a,"").trim().split(" "),o=o.filter(function(_){return _!==""}).map(parseFloat),u=o.length,l==="m"){if(w+="M ",a==="m"?(p+=o[0],m+=o[1]):(p=o[0],m=o[1]),f=p,d=m,w+=p+" "+m+" ",u>2)for(c=0;c<u;c+=2)a==="m"?(p+=o[c],m+=o[c+1]):(p=o[c],m=o[c+1]),w+="L "+p+" "+m+" "}else if(l==="l")for(c=0;c<u;c+=2)a==="l"?(p+=o[c],m+=o[c+1]):(p=o[c],m=o[c+1]),w+="L "+p+" "+m+" ";else if(l==="h")for(c=0;c<u;c++)a==="h"?p+=o[c]:p=o[c],w+="L "+p+" "+m+" ";else if(l==="v")for(c=0;c<u;c++)a==="v"?m+=o[c]:m=o[c],w+="L "+p+" "+m+" ";else if(l==="q")for(c=0;c<u;c+=4)a==="q"?(g=p+o[c],v=m+o[c+1],p+=o[c+2],m+=o[c+3]):(g=o[c],v=o[c+1],p=o[c+2],m=o[c+3]),w+="Q "+g+" "+v+" "+p+" "+m+" ";else if(l==="t")for(c=0;c<u;c+=2)g=p+(p-g),v=m+(m-v),a==="t"?(p+=o[c],m+=o[c+1]):(p=o[c],m=o[c+1]),w+="Q "+g+" "+v+" "+p+" "+m+" ";else if(l==="c")for(c=0;c<u;c+=6)a==="c"?(g=p+o[c],v=m+o[c+1],b=p+o[c+2],E=m+o[c+3],p+=o[c+4],m+=o[c+5]):(g=o[c],v=o[c+1],b=o[c+2],E=o[c+3],p=o[c+4],m=o[c+5]),w+="C "+g+" "+v+" "+b+" "+E+" "+p+" "+m+" ";else if(l==="s")for(c=0;c<u;c+=4)g=p+(p-b),v=m+(m-E),a==="s"?(b=p+o[c],E=m+o[c+1],p+=o[c+2],m+=o[c+3]):(b=o[c],E=o[c+1],p=o[c+2],m=o[c+3]),w+="C "+g+" "+v+" "+b+" "+E+" "+p+" "+m+" ";else if(l==="a")for(c=0;c<u;c+=7)S=o[c],C=o[c+1],k=o[c+2],z=o[c+3],T=o[c+4],a==="a"?(p+=o[c+5],m+=o[c+6]):(p=o[c+5],m=o[c+6]),w+="A "+S+" "+C+" "+k+" "+z+" "+T+" "+p+" "+m+" ";else l==="z"&&(w+="Z ",p=f,m=d);return w.trim()}y(Pt,"normalizePath");var nt={x:!1,y:!1};function At(h,e,i){if(e==="Z")return;if(e==="M"){nt={x:i[0],y:i[1]};return}let r=new h(nt.x,nt.y,...i),s=i.slice(-2);return nt={x:s[0],y:s[1]},r}y(At,"makeBezier");function Lt(h,e){let i=Pt(e).split(" "),r=new RegExp("[MLCQZ]",""),s,a,l,o=[],u={C:6,Q:4,L:2,M:2};for(;i.length;)s=i.splice(0,1)[0],r.test(s)&&(l=i.splice(0,u[s]).map(parseFloat),a=At(h,s,l),a&&o.push(a));return new h.PolyBezier(o)}y(Lt,"convertPath");var{abs:X,min:vt,max:zt,cos:Ot,sin:Rt,acos:Nt,sqrt:tt}=Math,Ft=Math.PI,et=class h{static{y(this,"Bezier")}constructor(e){let i=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if(typeof i[0]=="object"){r=i.length;let p=[];i.forEach(function(m){["x","y","z"].forEach(function(g){typeof m[g]<"u"&&p.push(m[g])})}),i=p}let s=!1,a=i.length;if(r){if(r>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let l=this._3d=!s&&(a===9||a===12)||e&&e[0]&&typeof e[0].z<"u",o=this.points=[];for(let p=0,m=l?3:2;p<a;p+=m){var u={x:i[p],y:i[p+1]};l&&(u.z=i[p+2]),o.push(u)}let c=this.order=o.length-1,f=this.dims=["x","y"];l&&f.push("z"),this.dimlen=f.length;let d=x.align(o,{p1:o[0],p2:o[c]});this._linear=!d.some(p=>X(p.y)>1e-4),this._lut=[],this._t1=0,this._t2=1,this.update()}static SVGtoBeziers(e){return Lt(h,e)}static quadraticFromPoints(e,i,r,s){if(typeof s>"u"&&(s=.5),s===0)return new h(i,i,r);if(s===1)return new h(e,i,i);let a=h.getABC(2,e,i,r,s);return new h(e,a.A,r)}static cubicFromPoints(e,i,r,s,a){typeof s>"u"&&(s=.5);let l=h.getABC(3,e,i,r,s);typeof a>"u"&&(a=x.dist(i,l.C));let o=a*(1-s)/s,u=x.dist(e,r),c=(r.x-e.x)/u,f=(r.y-e.y)/u,d=a*c,p=a*f,m=o*c,g=o*f,v={x:i.x-d,y:i.y-p},b={x:i.x+m,y:i.y+g},E=l.A,S={x:E.x+(v.x-E.x)/(1-s),y:E.y+(v.y-E.y)/(1-s)},C={x:E.x+(b.x-E.x)/s,y:E.y+(b.y-E.y)/s},k={x:e.x+(S.x-e.x)/s,y:e.y+(S.y-e.y)/s},z={x:r.x+(C.x-r.x)/(1-s),y:r.y+(C.y-r.y)/(1-s)};return new h(e,k,z,r)}static getUtils(){return x}getUtils(){return h.getUtils()}static get PolyBezier(){return ot}valueOf(){return this.toString()}toString(){return x.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,i=e[0].x,r=e[0].y,s=["M",i,r,this.order===2?"Q":"C"];for(let a=1,l=e.length;a<l;a++)s.push(e[a].x),s.push(e[a].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,i){return""+i+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=x.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,i=x.angle(e[0],e[this.order],e[1]);this.clockwise=i>0}length(){return x.length(this.derivative.bind(this))}static getABC(e=2,i,r,s,a=.5){let l=x.projectionratio(a,e),o=1-l,u={x:l*i.x+o*s.x,y:l*i.y+o*s.y},c=x.abcratio(a,e);return{A:{x:r.x+(r.x-u.x)/c,y:r.y+(r.y-u.y)/c},B:r,C:u,S:i,E:s}}getABC(e,i){i=i||this.get(e);let r=this.points[0],s=this.points[this.order];return h.getABC(this.order,r,i,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e)return this._lut;this._lut=[],e--;for(let i=0,r,s;i<e;i++)s=i/(e-1),r=this.compute(s),r.t=s,this._lut.push(r);return this._lut}on(e,i){i=i||5;let r=this.getLUT(),s=[];for(let a=0,l,o=0;a<r.length;a++)l=r[a],x.dist(l,e)<i&&(s.push(l),o+=a/r.length);return s.length?t/=s.length:!1}project(e){let i=this.getLUT(),r=i.length-1,s=x.closest(i,e),a=s.mpos,l=(a-1)/r,o=(a+1)/r,u=.1/r,c=s.mdist,f=l,d=f,p;c+=1;for(let m;f<o+u;f+=u)p=this.compute(f),m=x.dist(e,p),m<c&&(c=m,d=f);return d=d<0?0:d>1?1:d,p=this.compute(d),p.t=d,p.d=c,p}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?x.computeWithRatios(e,this.points,this.ratios,this._3d):x.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,i=[e[0]],r=e.length;for(let s=1,a,l;s<r;s++)a=e[s],l=e[s-1],i[s]={x:(r-s)/r*a.x+s/r*l.x,y:(r-s)/r*a.y+s/r*l.y};return i[r]=e[r-1],new h(i)}derivative(e){return x.compute(e,this.dpoints[0])}dderivative(e){return x.compute(e,this.dpoints[1])}align(){let e=this.points;return new h(x.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return x.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return x.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let i=this.derivative(e),r=tt(i.x*i.x+i.y*i.y);return{x:-i.y/r,y:i.x/r}}__normal3(e){let i=this.derivative(e),r=this.derivative(e+.01),s=tt(i.x*i.x+i.y*i.y+i.z*i.z),a=tt(r.x*r.x+r.y*r.y+r.z*r.z);i.x/=s,i.y/=s,i.z/=s,r.x/=a,r.y/=a,r.z/=a;let l={x:r.y*i.z-r.z*i.y,y:r.z*i.x-r.x*i.z,z:r.x*i.y-r.y*i.x},o=tt(l.x*l.x+l.y*l.y+l.z*l.z);l.x/=o,l.y/=o,l.z/=o;let u=[l.x*l.x,l.x*l.y-l.z,l.x*l.z+l.y,l.x*l.y+l.z,l.y*l.y,l.y*l.z-l.x,l.x*l.z-l.y,l.y*l.z+l.x,l.z*l.z];return{x:u[0]*i.x+u[1]*i.y+u[2]*i.z,y:u[3]*i.x+u[4]*i.y+u[5]*i.z,z:u[6]*i.x+u[7]*i.y+u[8]*i.z}}hull(e){let i=this.points,r=[],s=[],a=0;for(s[a++]=i[0],s[a++]=i[1],s[a++]=i[2],this.order===3&&(s[a++]=i[3]);i.length>1;){r=[];for(let l=0,o,u=i.length-1;l<u;l++)o=x.lerp(e,i[l],i[l+1]),s[a++]=o,r.push(o);i=r}return s}split(e,i){if(e===0&&i)return this.split(i).left;if(i===1)return this.split(e).right;let r=this.hull(e),s={left:this.order===2?new h([r[0],r[3],r[5]]):new h([r[0],r[4],r[7],r[9]]),right:this.order===2?new h([r[5],r[4],r[2]]):new h([r[9],r[8],r[6],r[3]]),span:r};return s.left._t1=x.map(0,0,1,this._t1,this._t2),s.left._t2=x.map(e,0,1,this._t1,this._t2),s.right._t1=x.map(e,0,1,this._t1,this._t2),s.right._t2=x.map(1,0,1,this._t1,this._t2),i?(i=x.map(i,e,1,0,1),s.right.split(i).left):s}extrema(){let e={},i=[];return this.dims.forEach(function(r){let s=y(function(l){return l[r]},"mfn"),a=this.dpoints[0].map(s);e[r]=x.droots(a),this.order===3&&(a=this.dpoints[1].map(s),e[r]=e[r].concat(x.droots(a))),e[r]=e[r].filter(function(l){return l>=0&&l<=1}),i=i.concat(e[r].sort(x.numberSort))}.bind(this)),e.values=i.sort(x.numberSort).filter(function(r,s){return i.indexOf(r)===s}),e}bbox(){let e=this.extrema(),i={};return this.dims.forEach(function(r){i[r]=x.getminmax(this,r,e[r])}.bind(this)),i}overlaps(e){let i=this.bbox(),r=e.bbox();return x.bboxoverlap(i,r)}offset(e,i){if(typeof i<"u"){let r=this.get(e),s=this.normal(e),a={c:r,n:s,x:r.x+s.x*i,y:r.y+s.y*i};return this._3d&&(a.z=r.z+s.z*i),a}if(this._linear){let r=this.normal(0),s=this.points.map(function(a){let l={x:a.x+e*r.x,y:a.y+e*r.y};return a.z&&r.z&&(l.z=a.z+e*r.z),l});return[new h(s)]}return this.reduce().map(function(r){return r._linear?r.offset(e)[0]:r.scale(e)})}simple(){if(this.order===3){let s=x.angle(this.points[0],this.points[3],this.points[1]),a=x.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&a<0||s<0&&a>0)return!1}let e=this.normal(0),i=this.normal(1),r=e.x*i.x+e.y*i.y;return this._3d&&(r+=e.z*i.z),X(Nt(r))<Ft/3}reduce(){let e,i=0,r=0,s=.01,a,l=[],o=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),i=u[0],e=1;e<u.length;e++)r=u[e],a=this.split(i,r),a._t1=i,a._t2=r,l.push(a),i=r;return l.forEach(function(c){for(i=0,r=0;r<=1;)for(r=i+s;r<=1+s;r+=s)if(a=c.split(i,r),!a.simple()){if(r-=s,X(i-r)<s)return[];a=c.split(i,r),a._t1=x.map(i,0,1,c._t1,c._t2),a._t2=x.map(r,0,1,c._t1,c._t2),o.push(a),i=r;break}i<1&&(a=c.split(i,1),a._t1=x.map(i,0,1,c._t1,c._t2),a._t2=c._t2,o.push(a))}),o}scale(e){let i=this.order,r=!1;if(typeof e=="function"&&(r=e),r&&i===2)return this.raise().scale(r);let s=this.clockwise,a=r?r(0):e,l=r?r(1):e,o=[this.offset(0,10),this.offset(1,10)],u=this.points,c=[],f=x.lli4(o[0],o[0].c,o[1],o[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){let p=c[d*i]=x.copy(u[d*i]);p.x+=(d?l:a)*o[d].n.x,p.y+=(d?l:a)*o[d].n.y}),r?([0,1].forEach(function(d){if(!(i===2&&d)){var p=u[d+1],m={x:p.x-f.x,y:p.y-f.y},g=r?r((d+1)/i):e;r&&!s&&(g=-g);var v=tt(m.x*m.x+m.y*m.y);m.x/=v,m.y/=v,c[d+1]={x:p.x+g*m.x,y:p.y+g*m.y}}}),new h(c)):([0,1].forEach(d=>{if(i===2&&d)return;let p=c[d*i],m=this.derivative(d),g={x:p.x+m.x,y:p.y+m.y};c[d+1]=x.lli4(p,g,f,u[d+1])}),new h(c))}outline(e,i,r,s){i=typeof i>"u"?e:i;let a=this.reduce(),l=a.length,o=[],u=[],c,f=0,d=this.length(),p=typeof r<"u"&&typeof s<"u";function m(z,T,w,_,O){return function(R){let G=_/w,U=(_+O)/w,B=T-z;return x.map(R,0,1,z+G*B,z+U*B)}}y(m,"linearDistanceFunction"),a.forEach(function(z){let T=z.length();p?(o.push(z.scale(m(e,r,d,f,T))),u.push(z.scale(m(-i,-s,d,f,T)))):(o.push(z.scale(e)),u.push(z.scale(-i))),f+=T}),u=u.map(function(z){return c=z.points,c[3]?z.points=[c[3],c[2],c[1],c[0]]:z.points=[c[2],c[1],c[0]],z}).reverse();let g=o[0].points[0],v=o[l-1].points[o[l-1].points.length-1],b=u[l-1].points[u[l-1].points.length-1],E=u[0].points[0],S=x.makeline(b,g),C=x.makeline(v,E),k=[S].concat(o).concat([C]).concat(u);return new ot(k)}outlineshapes(e,i,r){i=i||e;let s=this.outline(e,i).curves,a=[];for(let l=1,o=s.length;l<o/2;l++){let u=x.makeshape(s[l],s[o-l],r);u.startcap.virtual=l>1,u.endcap.virtual=l<o/2-1,a.push(u)}return a}intersects(e,i){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof h&&(e=e.reduce()),this.curveintersects(this.reduce(),e,i)):this.selfintersects(i)}lineIntersects(e){let i=vt(e.p1.x,e.p2.x),r=vt(e.p1.y,e.p2.y),s=zt(e.p1.x,e.p2.x),a=zt(e.p1.y,e.p2.y);return x.roots(this.points,e).filter(l=>{var o=this.get(l);return x.between(o.x,i,s)&&x.between(o.y,r,a)})}selfintersects(e){let i=this.reduce(),r=i.length-2,s=[];for(let a=0,l,o,u;a<r;a++)o=i.slice(a,a+1),u=i.slice(a+2),l=this.curveintersects(o,u,e),s.push(...l);return s}curveintersects(e,i,r){let s=[];e.forEach(function(l){i.forEach(function(o){l.overlaps(o)&&s.push({left:l,right:o})})});let a=[];return s.forEach(function(l){let o=x.pairiteration(l.left,l.right,r);o.length>0&&(a=a.concat(o))}),a}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,i,r,s){let a=(s-r)/4,l=this.get(r+a),o=this.get(s-a),u=x.dist(e,i),c=x.dist(e,l),f=x.dist(e,o);return X(c-u)+X(f-u)}_iterate(e,i){let r=0,s=1,a;do{a=0,s=1;let l=this.get(r),o,u,c,f,d=!1,p=!1,m,g=s,v=1;do if(p=d,f=c,g=(r+s)/2,o=this.get(g),u=this.get(s),c=x.getccenter(l,o,u),c.interval={start:r,end:s},d=this._error(c,l,r,s)<=e,m=p&&!d,m||(v=s),d){if(s>=1){if(c.interval.end=v=1,f=c,s>1){let E={x:c.x+c.r*Ot(c.e),y:c.y+c.r*Rt(c.e)};c.e+=x.angle({x:c.x,y:c.y},E,this.get(1))}break}s=s+(s-r)/2}else s=g;while(!m&&a++<100);if(a>=100)break;f=f||c,i.push(f),r=v}while(s<1);return i}};function It(h){if(h.length!==h[0].length){console.log("not square");return}var e=0,i=0,r=0,s=h.length,a=0,l=0,o=[],u=[];for(e=0;e<s;e+=1)for(o[o.length]=[],u[u.length]=[],r=0;r<s;r+=1)e==r?o[e][r]=1:o[e][r]=0,u[e][r]=h[e][r];for(e=0;e<s;e+=1){if(a=u[e][e],a==0){for(i=e+1;i<s;i+=1)if(u[i][e]!=0){for(r=0;r<s;r++)a=u[e][r],u[e][r]=u[i][r],u[i][r]=a,a=o[e][r],o[e][r]=o[i][r],o[i][r]=a;break}if(a=u[e][e],a==0)return}for(r=0;r<s;r++)u[e][r]=u[e][r]/a,o[e][r]=o[e][r]/a;for(i=0;i<s;i++)if(i!=e)for(a=u[i][e],r=0;r<s;r++)u[i][r]-=a*u[e][r],o[i][r]-=a*o[e][r]}return o}y(It,"invert");function Ut(h,e){var i=[],r=Et(e);return h.forEach((s,a)=>{i[a]=[],r.forEach((l,o)=>{i[a][o]=s.map((u,c)=>l[c]*u).reduce((u,c)=>u+c,0)})}),i}y(Ut,"multiply");function Et(h){return h[0].map((e,i)=>h.map(r=>r[i]))}y(Et,"transpose");var F=class h{static{y(this,"Matrix")}constructor(e,i,r){r=e instanceof Array?e:r,this.data=r??[...new Array(e)].map(s=>[...new Array(i)].map(a=>0)),this.rows=this.data.length,this.cols=this.data[0].length}setData(e){this.data=e}get(e,i){return this.data[e][i]}set(e,i,r){this.data[e][i]=r}row(e){return this.data[e]}col(e){var i=this.data,r=[];for(let s=0,a=i.length;s<a;s++)r.push(i[s][e]);return r}multiply(e){return new h(Ut(this.data,e.data))}invert(){return new h(It(this.data))}transpose(){return new h(Et(this.data))}};var Dt=[[1],[1,1]];function K(h,e){if(h===0)return 1;for(var i=Dt;h>=i.length;){for(var r=i.length,s=[1],a=1,l=r-1;a<r;a++)s[a]=i[l][a-1]+i[l][a];s[r]=1,i.push(s)}return i[h][e]}y(K,"binomial");function qt(h){let e=new F(h,h);var i=h-1;for(let o=0;o<h;o++)e.set(o,o,K(i,o));for(var r=0,s;r<h;r++)for(s=r+1;s<h;s++){var a=(s+r)%2===0?1:-1,l=K(s,r)*e.get(s,s);e.set(s,r,a*l)}return e}y(qt,"generateBasisMatrix");function Gt(h,e){let i=[];for(var r=0;r<e;r++)i.push(h.map(l=>l**r));let s=new F(e,e,i);return{T:s.transpose(),Tt:s}}y(Gt,"formTMatrix");function Bt(h,e,i,r){var s=Gt(r,e),a=s.T,l=s.Tt,o=i.invert(),u=l.multiply(a).invert(),c=u.multiply(l),f=o.multiply(c),d=new F(h.map(v=>[v.x])),p=f.multiply(d),m=new F(h.map(v=>[v.y])),g=f.multiply(m);return{x:p.data,y:g.data}}y(Bt,"computeBestFit");function Ct(h,e){let i=h.length;return Bt(h,i,qt(i),e)}y(Ct,"fitCurveToPoints");var at=class h extends et{static{y(this,"Bezier")}static defaultQuadratic(e){if(!e)throw new Error("missing reference of API instance in Bezier.defaultQuadratic(instance)");return new h(e,70,250,20,110,220,60)}static defaultCubic(e){if(!e)throw new Error("missing reference of API instance in Bezier.defaultCubic(instance)");return new h(e,110,150,25,190,210,250,210,30)}static fitCurveToPoints(e,i,r){if(!r){let u=[0];for(let d=1;d<n;d++)u[d]=u[d-1]+dist(i[d-1].x,i[d-1].y,i[d].x,i[d].y);let c=[],f=u[n-1];u.forEach((d,p)=>{c[p]=d/f}),r=c}let s=Ct(i,r),a=s.x,l=s.y,o=a.map((u,c)=>({x:u[0],y:l[c][0]}));return new h(e,o)}constructor(e,...i){if(!e||!e.setMovable)throw new Error("missing reference of API instance in Bezier constructor");super(...i),this.api=e,this.ctx=e.ctx}project(e,i){return super.project({x:e,y:i})}getPointNear(e,i,r=5){let s=this.points;for(let a=0,l=s.length;a<l;a++){let o=Math.abs(s[a].x-e),u=Math.abs(s[a].y-i);if((o*o+u*u)**.5<=r)return s[a]}}drawCurve(e="#333"){let i=this.ctx;i.save(),i.strokeStyle=e,i.beginPath();let r=this.getLUT().slice(),s=r.shift();for(i.moveTo(s.x,s.y);r.length;)s=r.shift(),i.lineTo(s.x,s.y);i.stroke(),i.restore()}drawPoints(e=!0){let i=["red","green","blue","yellow","orange","cyan","magenta"],r=this.api,s=this.ctx;s.save(),s.lineWidth=2,s.strokeStyle="#999",this.points.forEach((a,l)=>{if(r.setFill(i[l%i.length]),r.circle(a.x,a.y,5),e){r.setFill("black");let o=a.x|0,u=a.y|0;r.text(`(${o},${u})`,o+10,u+10)}}),s.restore()}drawSkeleton(e="#555"){let i=this.api,r=this.ctx;r.save();let s=this.points;i.noFill(),i.setStroke(e),i.start(),s.forEach(a=>i.vertex(a.x,a.y)),i.end(),r.restore()}getStrutPoints(e){let i=this.points.map(l=>new M(l)),r=1-e,s=0,a=i.length+1;for(;--a>1;){let l=i.slice(s,s+a);for(let o=0,u=l.length-1;o<u;o++){let c=l[o+1].subtract(l[o+1].subtract(l[o]).scale(r));i.push(c)}s+=a}return i}drawStruts(e,i="black",r=!0){let s=e.forEach?e:this.getStrutPoints(e),a=this.api,l=a.ctx;l.save(),a.noFill(),a.setStroke(i);let o=this.points.length,u=this.points.length;for(;--u>1;){a.start();for(let c=0;c<u;c++){let f=s[o+c];a.vertex(f.x,f.y),r&&a.circle(f.x,f.y,5)}a.end(),o+=u}return l.restore(),s}drawBoundingBox(e="black"){let i=this.bbox(),r=i.x.min,s=i.y.min,a=i.x.max,l=i.y.max,o=this.api;o.save(),o.noFill(),o.setStroke(e),o.rect(r,s,a-r,l-s),o.restore()}};function pt(h,e,i,r,s,S,l){var o,u,c,f,d=i.length,p=i[0].length;if(e<1)throw new Error("degree must be at least 1 (linear)");if(e>d-1)throw new Error("degree must be less than or equal to point count - 1");if(!s)for(s=[],o=0;o<d;o++)s[o]=1;if(s.length<i.length&&(s=s.concat(s.slice(0,e))),r){if(r.length!==d+e+1)throw new Error("bad knot vector length")}else{var r=[];for(o=0;o<d+e+1;o++)r[o]=o}r.length===i.length&&(r=r.concat(r.slice(0,e)));var m=[e,r.length-1-e],g=r[m[0]],v=r[m[1]];if(l||(h=h*(v-g)+g),h<g||h>v)throw new Error("out of bounds");for(c=m[0];c<m[1]&&!(h>=r[c]&&h<=r[c+1]);c++);var b=[];for(o=0;o<d;o++){for(b[o]=[],u=0;u<p;u++)b[o][u]=i[o][u]*s[o];b[o][p]=s[o]}var E;for(f=1;f<=e+1;f++)for(o=c;o>c-e-1+f;o--)for(E=(h-r[o])/(r[o+e+1-f]-r[o]),u=0;u<p+1;u++)b[o][u]=(1-E)*b[o-1][u]+E*b[o][u];var S=S||[];for(o=0;o<p;o++)S[o]=b[c][o]/b[c][p];return S}y(pt,"interpolate");var I=3,ht=class{static{y(this,"BSpline")}constructor(e,i){this.api=e,this.ctx=e.ctx,this.points=i.map(r=>r instanceof Array?r:[r.x,r.y])}getLUT(e){let i=e-1;return[...new Array(e)].map((r,s)=>{let a=pt(s/i,I,this.points,this.knots,this.weights);return{x:a[0],y:a[1]}})}formKnots(e=!1){if(!e)return this.formUniformKnots();let i=[],r=this.points.length,s=r-I;for(let a=1;a<r-I;a++)i.push(a+I);for(let a=0;a<=I;a++)i=[I].concat(i);for(let a=0;a<=I;a++)i.push(s+I);return this.knots=i}formUniformKnots(){return this.knots=[...new Array(this.points.length+I+1)].map((e,i)=>i)}formWeights(){return this.weights=this.points.map(e=>1)}};var $=class h{static{y(this,"Shape")}constructor(e,i,r=[]){this.first=!1,this.segments=[],this.newSegment(e,i),r.forEach(s=>this.vertex(s))}merge(e){e.segments||(e={segments:[new lt(h.POLYGON,void 0,e)]}),e.segments.forEach(i=>this.segments.push(i))}copy(){let e=new h(this.type,this.factor);return e.first=this.first,e.segments=this.segments.map(i=>i.copy()),e}newSegment(e,i){this.currentSegment=new lt(e,i),this.segments.push(this.currentSegment)}vertex(e){this.first||(this.first=e),this.currentSegment.add(e)}};$.POLYGON="Polygon";$.CURVE="CatmullRom";$.BEZIER="Bezier";var lt=class h{static{y(this,"Segment")}constructor(e,i,r=[]){this.type=e,this.factor=i,this.points=r}copy(){let e=new h(this.type,this.factor);return e.points=JSON.parse(JSON.stringify(this.points)),e}add(e){this.points.push(e)}};var it=class{static{y(this,"BaseAPI")}static get privateMethods(){return["constructor","createHatchPatterns","addListeners","setCursorCoords"].concat(this.superCallers).concat(this.eventHandlers)}static get superCallers(){return["setup","draw"]}static get eventHandlers(){return["onMouseDown","onMouseMove","onMouseUp","onKeyDown","onKeyUp"]}static get methods(){let e=this.privateMethods;return["setSize","redraw"].concat(Object.getOwnPropertyNames(this.prototype)).filter(r=>e.indexOf(r)<0)}constructor(e,i=200,r=200,s,a){if(e&&(this.element=window[e],delete window[e],this.dataset=this.element.dataset),s){let{canvas:o,ctx:u}=s(i,r);this.canvas=o,this.ctx=u,this.preSized=!0}else this.canvas=document.createElement("canvas");this.dataset||(a?this.dataset=a:this.dataset={}),Object.defineProperty(this,"parameters",{writable:!1,configurable:!1,value:Object.fromEntries(Object.entries(this.dataset).map(o=>{let u=o[0],c=o[1];if(c==="null"||c==="undefined")return[];if(c==="true")return[u,!0];if(c==="false")return[u,!1];{let f=parseFloat(c);if(c==f)return[u,f]}return[u,c]}).filter(o=>o.length))}),this.addListeners(),this.setSize(i,r),this.currentPoint=!1,this.frame=0;let l=performance.now();this.setup(),this.__ready_to_draw=!0,this.__lastFrameTime=l,this.draw()}addListeners(){let e=this.canvas;this.element&&this.element.setGraphic(this),this.cursor={};let i=typeof document<"u"?document:e;["pointerdown"].forEach(r=>e.addEventListener(r,s=>this.onMouseDown(s))),["pointermove"].forEach(r=>e.addEventListener(r,s=>{this.onMouseMove(s)},{passive:!1})),["pointerup"].forEach(r=>i.addEventListener(r,s=>this.onMouseUp(s))),this.keyboard={},["keydown"].forEach(r=>e.addEventListener(r,s=>this.onKeyDown(s))),["keyup"].forEach(r=>e.addEventListener(r,s=>this.onKeyUp(s)))}stopEvent(e){e.target===this.canvas&&(e.preventDefault(),e.stopPropagation())}setCursorCoords(e){this.cursor.x=e.offsetX,this.cursor.y=e.offsetY}onMouseDown(e){this.stopEvent(e),this.cursor.down=!0,this.setCursorCoords(e)}onMouseMove(e){this.stopEvent(e),this.setCursorCoords(e)}onMouseUp(e){this.stopEvent(e),this.cursor.down=!1}safelyInterceptKey(e){let i=e.key!=="Tab",r=e.key.match(/F\d+/)===null,s=i&&r;!e.altKey&&!e.ctrlKey&&!e.metaKey&&s&&this.stopEvent(e)}onKeyDown(e){this.safelyInterceptKey(e),this.keyboard[e.key]=!0,this.keyboard.currentKey=e.key}onKeyUp(e){this.safelyInterceptKey(e),this.keyboard[e.key]=!1,this.keyboard.currentKey=e.key}setSize(e,i){this.width=e||this.width,this.height=i||this.height,this.element.style.setProperty("--width",this.width),this.element.style.setProperty("--height",this.height),this.preSized||(this.canvas.width=this.width,this.canvas.style.width=`${this.width}px`,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"))}setup(){this.movable=[],this.font={size:10,weight:400,family:"arial"}}draw(){this.__ready_to_draw&&this.frame++}redraw(){this.__ready_to_draw&&!this.playing&&!this.redrawing&&(this.redrawing=!0,this.draw(),this.redrawing=!1)}};var W=y(()=>{},"noop");function A(h){return typeof document<"u"?j(document.createElement(h)):{name:h,tag:h.toUpperCase(),append:W,appendChild:W,replaceChild:W,removeChild:W,classList:{add:W,remove:W},children:[]}}y(A,"create");function mt(h){return h.prototype.addSlider=y(function(i,r={}){if(this.element){let{min:s=0,max:a=1,step:l=1,value:o=0,classes:u="slider",transform:c=y(d=>d,"transform")}=r,f=A("input");return f.type="range",f.min=s,f.max=a,f.step=l,f.setAttribute("value",o),f.setAttribute("class",u),this.element.append(f),this.setSlider(f,i,o,c)}},"addSlider"),h.prototype.updateSlider=y(function(i,r,s,a,l){let o=this._sliders[i];if(!o)throw new Error(`this.${i} has no associated slider.`);o.setAttribute("min",r),o.setAttribute("max",s),o.setAttribute("step",a),o.setAttribute("value",l),o.updateProperty(l)},"updateSlider"),h.prototype.setSlider=y(function(i,r,s,a){if(r!==!1&&typeof this[r]<"u")throw new Error(`this.${r} already exists: cannot bind slider.`);this._sliders=this._sliders||{};let l=r.replace("!","");r=l===r?r:!1;let o=typeof i=="string"?this.find(i):i,u=(()=>{if(!this.element)return{update:b=>{}};let d=find("table.slider-wrapper");d||(d=o.parentNode.querySelector("table.slider-wrapper"),d||(d=A("table"),d.classList.add("slider-wrapper"),o.parentNode.replaceChild(d,o)));let p=A("tr"),m=A("td"),g=A("label");g.classList.add("slider-label"),g.textContent=l,m.append(g),p.append(m),m=A("td"),m.classList.add("slider-min"),m.textContent=o.min,p.append(m),m=A("td"),o.classList.add("slider"),this._sliders[r]=o,m.append(o),p.append(m),m=A("td"),m.classList.add("slider-max"),m.textContent=o.max,p.append(m),m=A("td");let v=A("label");return v.classList.add("slider-value"),m.append(v),p.append(m),d.append(p),{update:b=>v.textContent=b}})();if(!o){console.warn(`Warning: no slider found for query selector "${i}"`),r&&(this[r]=s);return}let c=o.getAttribute("step")||"1",f=c.includes(".")?c.substring(c.indexOf(".")+1).length:0;return o.updateProperty=d=>{let p=parseFloat(o.value);u.update(p.toFixed(f));try{let m=a?a(p)??p:p;r&&(this[r]=m)}catch(m){d instanceof Event&&(d.preventDefault(),d.stopPropagation()),u.update(m.value.toFixed(f)),o.value=m.value,o.setAttribute("value",m.value)}this.redrawing||this.redraw()},o.value=s,o.updateProperty({target:{value:s}}),o.listen("input",d=>o.updateProperty(d)),o},"setSlider"),h.prototype.removeSliders=y(function(){this.findAll(".slider-wrapper").forEach(i=>{i.parentNode.removeChild(i)})},"removeSliders"),h}y(mt,"impartSliderLogic");var jt=5,Ht=30,ct=0,_t="pointer",L=class extends it{static{y(this,"GraphicsAPI")}#t=!1;playing=!1;frame=0;static get constants(){return["POINTER","HAND","PI","TAU","POLYGON","CURVE","BEZIER","CENTER","LEFT","RIGHT"]}get PI(){return 3.14159265358979}get TAU(){return 6.28318530717958}get POINTER(){return"default"}get HAND(){return"pointer"}get CROSS(){return"crosshair"}get POLYGON(){return $.POLYGON}get CURVE(){return $.CURVE}get BEZIER(){return $.BEZIER}get CENTER(){return"center"}get LEFT(){return"left"}get RIGHT(){return"right"}onMouseDown(e){super.onMouseDown(e),this.cursor.mark={x:this.cursor.x,y:this.cursor.y},this.cursor.last={x:this.cursor.x,y:this.cursor.y};let i=e.targetTouches?Ht:jt;for(let r=0,s=this.movable.length,a,l;r<s;r++){a=this.movable[r],l=new M(a).dist(this.cursor);let o=a.r||a.radius||i;if(l<=o){this.currentPoint=a,this.cursor.pd={x:this.cursor.x-a.x,y:this.cursor.y-a.y};break}}this.redraw()}onMouseMove(e){super.onMouseMove(e);let{pointerType:i}=e;if(this.cursor.down&&(this.cursor.diff={x:this.cursor.x-this.cursor.last.x,y:this.cursor.y-this.cursor.last.y,total:{x:this.cursor.x-this.cursor.mark.x,y:this.cursor.y-this.cursor.mark.y}},this.cursor.last={x:this.cursor.x,y:this.cursor.y}),this.currentPoint)this.currentPoint.x=this.cursor.x-this.cursor.pd.x,this.currentPoint.y=this.cursor.y-this.cursor.pd.y;else{let r=!1;for(let s=0,a=this.movable.length,l;s<a;s++){l=this.movable[s];let o=i==="touch"?40:l.r||l.radius||5;if(new M(l).dist(this.cursor)<=o){this.canvas.style.cursor!=="none"&&this.setCursor(this.HAND),r=!0;break}}!r&&this.canvas.style.cursor!=="none"&&this.setCursor(this.POINTER)}this.movable.length&&this.currentPoint&&!this.redrawing&&this.redraw()}onMouseUp(e){super.onMouseUp(e),delete this.cursor.mark,delete this.cursor.last,delete this.cursor.diff,this.currentPoint=!1}setup(){super.setup(),this.__setupComplete=!0,this.setGrid(20,"#F0F0F0")}draw(){let e=performance.now();this.frameTime=e-this.__lastFrameTime,this.__lastFrameTime=e,ct=0,super.draw(),this.playing&&requestAnimationFrame(()=>this.draw()),this.frame++}setMovable(e){e.forEach||(e=[e]),e.forEach(i=>this.movable.push(i))}resetMovable(e){this.movable.splice(0,this.movable.length),e&&this.setMovable(e)}setPanelCount(e){this.panelWidth=this.width/e}nextPanel(e="black"){this.translate(this.panelWidth,0),this.setStroke(e),this.line(0,0,0,this.height)}toDataURL(){return this.canvas.toDataURL()}image(e,i=0,r=0,s,a){this.ctx.drawImage(e,i,r,s||e.width,a||e.height)}translate(e,i){this.ctx.translate(e,i)}rotate(e){this.ctx.rotate(e)}scale(e,i){i=i||e,this.ctx.scale(e,i)}transform(e,i,r,s,a,l){this.ctx.transform(e,i,r,s,a,l)}screenToWorld(e,i){i===void 0&&(i=e.y,e=e.x);let r=this.ctx.getTransform().invertSelf();return{x:e*r.a+i*r.c+r.e,y:e*r.b+i*r.d+r.f}}worldToScreen(e,i){i===void 0&&(i=e.y,e=e.x);let r=this.ctx.getTransform();return{x:e*r.a+i*r.c+r.e,y:e*r.b+i*r.d+r.f}}resetTransform(){this.ctx.resetTransform()}find(e){return this.element?j(this.element.querySelector(e)):!1}findAll(e){return this.element?Array.from(this.element.querySelectorAll(e)).map(i=>j(i)):!1}setBorder(e=1,i="black"){e===!1?this.canvas.style.border="none":this.canvas.style.border=`${e}px solid ${i}`}setMargin(e=0){this.canvas.style.marginTop=`${e}px`,this.canvas.style.marginBottom=`${e}px`}hideCursor(){this.canvas.style.cursor="none"}showCursor(){this.canvas.style.cursor=_t}setCursor(e){_t=e,this.showCursor()}randomColor(e=1,i=!0){return i&&(ct=(ct+73)%360),`hsla(${ct},50%,50%,${e})`}setFill(e){this.ctx.fillStyle=e}noFill(){this.setFill("transparent")}setStroke(e){this.ctx.strokeStyle=e}noStroke(){this.setStroke("transparent")}setColor(e){this.setFill(e),this.setStroke(e)}noColor(){this.noFill(),this.noStroke()}setTextStroke(e,i){this.textStroke=e,this.setStrokeWeight(i)}noTextStroke(){this.textStroke=!1,this.setStrokeWeight(weight)}setLineDash(...e){this.ctx.setLineDash(e)}noLineDash(){this.ctx.setLineDash([])}setWidth(e=1){this.ctx.lineWidth=e}setFontSize(e){this.font.size=e,this.setFont()}setFontWeight(e){this.font.weight=e,this.setFont()}setFontFamily(e){this.font.family=e,this.setFont()}setFont(e){e=e||`${this.font.weight} ${this.font.size}px ${this.font.family}`,this.ctx.font=e}setShadow(e,i){this.ctx.shadowColor=e,this.ctx.shadowBlur=i}noShadow(){this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0}save(){this.ctx.save()}restore(){this.ctx.restore()}setGrid(e,i){this._gridParams={size:e,color:i}}noGrid(){this._gridParams=!1}clear(e="white",i=!1){this.save(),this.resetTransform(),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.restore(),i||this.resetTransform(),this._gridParams&&(this.save(),this.setStroke(this._gridParams.color),this.translate(.5,.5),this.drawGrid(this._gridParams.size),this.translate(-.5,-.5),this.restore())}point(e,i){this.circle(e,i,5)}line(e,i,r,s){this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(r,s),this.ctx.stroke()}circle(e,i,r){this.arc(e,i,r,0,this.TAU)}arc(e,i,r,s,a,l=!1){this.ctx.beginPath(),l&&this.ctx.moveTo(e,i),this.ctx.arc(e,i,r,s,a),l&&this.ctx.moveTo(e,i),this.ctx.fill(),this.ctx.stroke()}wedge(e,i,r,s,a){this.arc(e,i,r,s,a,!0)}text(e,i,r,s){r===void 0&&(r=i.y,i=i.x);let a=this.ctx;a.save(),s&&(a.textAlign=s),this.textStroke&&(this.ctx.lineWidth=this.strokeWeight,this.setStroke(this.textStroke),this.ctx.strokeText(e,i,r)),this.ctx.fillText(e,i,r),a.restore()}rect(e,i,r,s){this.ctx.fillRect(e,i,r,s),this.ctx.strokeRect(e,i,r,s)}triangle(e,i,r,s,a,l){this.start(),this.vertex(e,i),this.vertex(r,s),this.vertex(a,l),this.end(!0)}plot(e,i=0,r=1,s=24,a=1,l=1){let o=r-i;this.start();for(let u=0,c=s-1,f;u<s;u++)f=e(i+o*u/c),this.vertex(f.x*a,f.y*l);return this.end(),this.currentShape}start(e){this.currentShape=new $(e||this.POLYGON)}segment(e,i){this.currentShape.addSegment(e,i)}vertex(e,i){this.currentShape.vertex({x:e,y:i})}drawShape(...e){e=e.map(i=>i instanceof $?i:new $(this.POLYGON,void 0,i)),this.currentShape=e[0].copy();for(let i=1;i<e.length;i++)this.currentShape.merge(e[i]);this.end()}end(e=!1){this.ctx.beginPath();let{x:i,y:r}=this.currentShape.first;this.ctx.moveTo(i,r),this.currentShape.segments.forEach(s=>this[`draw${s.type}`](s.points,s.factor)),e&&this.ctx.lineTo(i,r),this.ctx.fill(),this.ctx.stroke()}saveShape(){return this.currentShape}drawPolygon(e){let[i,...r]=e;i&&(this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),r.forEach(s=>this.ctx.lineTo(s.x,s.y)),this.ctx.fill(),this.ctx.stroke())}drawCatmullRom(e,i=1){let r=e[0],s=e[1],a=e[2],l=new M(r.x/2+a.x/2,r.y/2+a.y/2),o=new M(r).reflect(s),u=l.reflect(s),c=new M(o.x/2+u.x/2,o.y/2+u.y/2),f=e.at(-3),d=e.at(-2),p=e.at(-1),m=new M(p.x/2+f.x/2,p.y/2+f.y/2),g=new M(p).reflect(d),v=new M(g.x/2+m.x/2,g.y/2+m.y/2),b=[c,...e,v];this.ctx.beginPath(),this.ctx.moveTo(b[1].x,b[1].y);for(let E=0,S=b.length-3;E<S;E++){let[C,k,z,T]=b.slice(E,E+4),w={x:k.x+(z.x-C.x)/(6*i),y:k.y+(z.y-C.y)/(6*i)},_={x:z.x-(T.x-k.x)/(6*i),y:z.y-(T.y-k.y)/(6*i)};this.ctx.bezierCurveTo(w.x,w.y,_.x,_.y,z.x,z.y)}this.ctx.fill(),this.ctx.stroke()}drawBezier(e){for(let i=0,r=e.length;i<r;i+=3){let[s,a,l]=e.slice(i,i+3);this.ctx.bezierCurveTo(s.x,s.y,a.x,a.y,l.x,l.y)}}drawGrid(e=20){let i=this.panelWidth??this.width;for(let r=e/2|0;r<i;r+=e)this.line(r,0,r,this.height);for(let r=e/2|0;r<this.height;r+=e)this.line(0,r,i,r)}drawAxes(e,i,r,s,a,l,o,u){u=u||this.height,o=o||this.width,this.line(0,0,o,0),this.line(0,0,0,u);let c=-5;this.text(`${e} \u2192`,o/2,c,this.CENTER),this.text(i,0,c,this.CENTER),this.text(r,o,c,this.CENTER);let f=-10;this.text(`${s}
\u2193`,f,u/2,this.RIGHT),this.text(a,f,5,this.RIGHT),this.text(l,f,u,this.RIGHT)}floor(e){return Math.floor(e)}ceil(e){return Math.ceil(e)}round(e){return Math.round(e)}random(e=0,i=1){return e+(i-e)*Math.random()}abs(e){return Math.abs(e)}min(...e){return Math.min(...e)}max(...e){return Math.max(...e)}approx(e,i,r=.001){return Math.abs(e-i)<r}sin(e){return Math.sin(e)}cos(e){return Math.cos(e)}tan(e){return Math.tan(e)}sqrt(e){return Math.sqrt(e)}atan2(e,i){return Math.atan2(e,i)}binomial(e,i){return K(e,i)}map(e,i,r,s,a,l=!1){let o=r-i,u=a-s,c=e-i,f=s+c*u/o;return l?this.constrain(f,s,a):f}constrain(e,i,r){return e<i?i:e>r?r:e}dist(e,i,r,s){let a=e-r,l=i-s;return this.sqrt(a*a+l*l)}play(){this.playing||(this.playing=!0,this.__setupComplete&&requestAnimationFrame(()=>this.draw()))}togglePlay(){return this.playing?this.pause():this.play(),this.playing}pause(){this.playing=!1}};mt(L);function xt(h){return h=h.replace(/\r?\n(\r?\n)+/,`
`),L.superCallers.forEach(e=>{let i=new RegExp(`${e}\\(([^)]*)\\)[\\s\\r\\n]*{[\\s\\r\\n]*`,"g");h=h.replace(i,`${e}($1) { super.${e}($1);
`)}),L.eventHandlers.forEach(e=>{let i=new RegExp(`\\b${e}\\(\\)[\\s\\r\\n]*{[\\s\\r\\n]*`,"g");h=h.replace(i,`${e}(evt) { super.${e}(evt);
`)}),L.methods.forEach(e=>{let i=new RegExp(`([!({\\s\\r\\n])${e}\\(`,"g");h=h.replace(i,`$1this.${e}(`)}),L.constants.forEach(e=>{let i=new RegExp(`(\\b)${e}(\\b)`,"g");h=h.replace(i,`$1this.${e}$2`)}),h}y(xt,"performCodeSurgery");function Kt(h){if(typeof window>"u"||typeof document>"u")return!0;var e=h.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}y(Kt,"isInViewport");var rt=class extends Y{static{y(this,"GraphicsElement")}constructor(){super({header:!1,footer:!1}),this.originalHTML=this.outerHTML,this.label=document.createElement("label"),this.title||(this.title=""),this.label.textContent=this.title}connectedCallback(){super.connectedCallback(),Kt(this)?this.loadSource():new IntersectionObserver((e,i)=>e.forEach(r=>{r.isIntersecting&&(this.loadSource(),i.disconnect())}),{threshold:.1,rootMargin:`${window.innerHeight}px`}).observe(this)}getStyle(){return`
      :host([hidden]) { display: none; }
      :host { max-width: calc(2em + ${this.getAttribute("width")}px); }
      :host style { display: none; }
      :host .top-title { display: flex; flex-direction: row-reverse; justify-content: space-between; }
      :host canvas { touch-action: none; user-select: none; position: relative; z-index: 1; display: block; margin: auto; border-radius: 0; box-sizing: content-box!important; border: 1px solid lightgrey; }
      :host canvas:focus { border: 1px solid red; }
      :host a.view-source { font-size: 60%; text-decoration: none; }
      :host button.reset { font-size: 0.5em; }
      :host label { display: block; font-style:italic; font-size: 0.9em; text-align: right; }
    `}handleChildChanges(e,i){}handleAttributeChange(e,i,r){if(e==="title"&&(this.label.textContent=this.getAttribute("title")),this.apiInstance){let s=this.apiInstance;e==="width"&&(s.setSize(parseInt(r),!1),s.redraw()),e==="height"&&(s.setSize(!1,parseInt(r)),s.redraw())}}async loadSource(){St(`loading ${this.getAttribute("src")}`);let e=this.src=this.getAttribute("src");if(!e)throw new Error("missing src attribute for graphics-element");let i=await fetch(e).then(u=>u.text()),r=i.indexOf("function setup()"),s=i.substring(0,r);i=i.substring(r);let a=!0,l=L.privateMethods.concat(L.methods);for(;a&&(a=i.match(/\n?\s*function\s+(\S+)\(/),!!a);){i=i.replace(/\n?\s*function\s+(\S+)\(/,`
$1(`);let u=a[1];l.includes(u)||(i=i.replaceAll(new RegExp(`([^.
])${u}`,"g"),`$1this.${u}`))}let o=window.location.href;o.match(/\/[^.]+\.[^\/]+$/)&&(o=o.substring(0,o.lastIndexOf("/"))),s=s.replaceAll(/import (.+) from\s*['"]([^'"]+)['"];/g,`import $1 from "${o}$2"`),this.processSource(e,s,i,!0)}processSource(e,i,r,s=!1){this.script&&(this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.canvas.parentNode.removeChild(this.canvas),s=!0);let a=this.uid=`bg-uid-${Date.now()}-${`${Math.random()}`.replace("0.","")}`;window[a]=this;let l,o=document.querySelector("base");if(o)l=o.href;else{let m=window.location.toString();l=m.substring(0,m.lastIndexOf("/")+1)}let u=`${l}${e}`,c=u.substring(0,u.lastIndexOf("/")+1);r=r.replace(/(import .+? from) "([^"]+)"/g,(m,g,v)=>`${g} "${c}${v}"`),this.linkableCode=r;let f=ut(r),d=i+`
`+f.quasiGlobal,p=xt(f.classCode);this.setupCodeInjection(e,a,d,p,s)}setupCodeInjection(e,i,r,s,a){let l=this.getAttribute("width")||400,o=this.getAttribute("height")||200;this.code=`
      /**
       * Program source: ${e}
       * Data attributes: ${JSON.stringify(this.dataset)}
       */
      import { enrich, Bezier, BSpline, Vector, Matrix, Shape, binomial, BaseAPI, GraphicsAPI, impartSliderLogic } from "${import.meta.url}";

      ${r}

      class Example extends GraphicsAPI {
        ${s}
      }

      new Example('${i}', ${l}, ${o});
    `;let u=this.script=document.createElement("script");u.type="module",u.src=`data:application/javascript;charset=utf-8,${encodeURIComponent(this.code)}`,a&&this.render()}async reset(){let e=this.parentNode,i=document.createElement("div");i.style.display="none",i.innerHTML=this.originalHTML;let r=i.querySelector("graphics-element");r.style.width=getComputedStyle(this).getPropertyValue("width"),r.style.height=getComputedStyle(this).getPropertyValue("height"),e.replaceChild(r,this)}setGraphic(e){this.apiInstance=e,this.setCanvas(e.canvas);let i=this.querySelector("fallback-image");i&&this.removeChild(i)}setCanvas(e){this.canvas=e,this.canvas.setAttribute("tabindex","0"),this.canvas.addEventListener("pointerdown",i=>this.canvas.focus()),clearTimeout(this.errorPrintTimeout),this.render(),this.dispatchEvent(new CustomEvent("load")),this.onload&&this.onload()}printCodeDueToError(){St(this.code.split(`
`).map((e,i)=>`${i+1}: ${e}`).join(`
`))}render(){super.render(),this.script&&(this.script.__inserted||(this.errorPrintTimeout=setTimeout(()=>this.printCodeDueToError(),1e3),this.script.__inserted=!0,this._shadow.appendChild(this.script)));let e=this._slot.parentNode;this.canvas&&e.insertBefore(this.canvas,this._slot),this.label&&e.insertBefore(this.label,this._slot);let i=document.createElement("div");i.classList.add("top-title");let r=document.createElement("button");if(r.classList.add("reset"),r.textContent=this.getAttribute("reset")||"reset",r.addEventListener("click",()=>this.reset()),i.append(r),this.src){let s=document.createElement("a");s.classList.add("view-source"),s.textContent=this.getAttribute("viewSource")||"view source",s.href=this.src,s.target="_blank",i.append(s)}this.label&&e.insertBefore(i,this.canvas)}};Y.register(rt);rt.DEBUG=!1;function St(...h){rt.DEBUG}y(St,"debugLog");export{ht as BSpline,it as BaseAPI,at as Bezier,L as GraphicsAPI,rt as GraphicsElement,F as Matrix,$ as Shape,M as Vector,K as binomial,j as enrich,mt as impartSliderLogic};
